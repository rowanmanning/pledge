// Generated by CoffeeScript 1.3.3
/*
Pledge - v0.2.0

Copyright 2012, Rowan Manning
Dual licensed under the MIT or GPL Version 2 licenses.
*/(function(){var e,t=[].slice,n={}.hasOwnProperty,r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};e={},e.util={cast:{toString:function(e){return Object.prototype.toString.call(e)}},type:{isArray:Array.isArray||function(t){return e.util.cast.toString(t)==="[object Array]"},isBoolean:function(e){return typeof e=="boolean"},isFunction:function(t){return e.util.cast.toString(t)==="[object Function]"},isNull:function(e){return e===null},isNumber:function(e){return typeof e=="number"},isObject:function(e){return e===Object(e)},isString:function(e){return typeof e=="string"},isUndefined:function(e){return typeof e=="undefined"},isNotArray:function(t){return!e.util.type.isArray(t)},isNotBoolean:function(t){return!e.util.type.isBoolean(t)},isNotFunction:function(t){return!e.util.type.isFunction(t)},isNotNull:function(t){return!e.util.type.isNull(t)},isNotNumber:function(t){return!e.util.type.isNumber(t)},isNotObject:function(t){return!e.util.type.isObject(t)},isNotString:function(t){return!e.util.type.isString(t)},isDefined:function(t){return!e.util.type.isUndefined(t)}},instance:{isInstanceOf:function(e,t){return typeof t!="function"?!1:e instanceof t},isNotInstanceOf:function(t,n){return!e.util.instance.isInstanceOf(t,n)}}},e.Test=function(){function c(e){if(!(this instanceof c))throw new Error("Bad construction, missing `new`");this._subject=e,this._logicMode=c.LOGIC_MODE_AND,this._results=[]}var i,s,o,u,a,f,l=this;c.LOGIC_MODE_AND="and",c.LOGIC_MODE_OR="or",c.prototype.getSubject=function(){return this._subject},c.prototype.setLogicMode=function(e){if(this._results.length>0)throw new Error("Logic mode cannot be changed once assertions have been made");if(e!==c.LOGIC_MODE_AND&&e!==c.LOGIC_MODE_OR)throw new Error("Invalid logic mode");return this._logicMode=e},c.prototype.getLogicMode=function(){return this._logicMode},c.prototype.assert=function(){var e,n,r,i;n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[];if(typeof n!="function")throw new Error("Invalid fn argument, function expected");return e.unshift(this.getSubject()),i=n.apply(this,e),r=typeof i=="boolean"?i:!1,this._results.push(r),r},a=e.util.type,o=function(t){return c.prototype[t]=function(){return this.assert(e.util.type[t])}};for(s in a){if(!n.call(a,s))continue;i=a[s],o(s)}f=e.util.instance,u=function(t){return c.prototype[t]=function(n){return this.assert(e.util.instance[t],n)}};for(s in f){if(!n.call(f,s))continue;i=f[s],u(s)}return c.prototype.passes=function(){return this._results.length===0?!0:this.getLogicMode()===c.LOGIC_MODE_AND?r.call(this._results,!1)<0:r.call(this._results,!0)>=0},c}.call(this),e.TestChain=function(t){function n(e){n.__super__.constructor.call(this,e),this.otherwise=this.and=this.or=this}return i(n,t),n.prototype.all=function(){return this.setLogicMode(e.Test.LOGIC_MODE_AND),this},n.prototype.either=function(){return this.setLogicMode(e.Test.LOGIC_MODE_OR),this},n.prototype.assert=function(){return n.__super__.assert.apply(this,arguments),this},n.prototype.error=function(e){if(e instanceof Error||typeof e=="string"){if(!this.passes())throw typeof e=="string"?new Error(e):e;return this}throw new Error("Invalid object argument, Error or string expected")},n}(e.Test),e.pledge=function(t){if(this instanceof e.pledge)throw new Error("Bad method call, unexpected `new`");return new e.TestChain(t)},typeof module!="undefined"&&module!==null||typeof window=="undefined"?module.exports=e:(window.pledge=e.pledge,window.pledge.util=e.util)}).call(this);